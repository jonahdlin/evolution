(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{53:function(e,t,n){e.exports=n(73)},58:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),r=n(15),a=n.n(r),s=(n(58),n(18)),u=100,c=2*Math.PI,l=2*Math.PI,h=n(22),d=n(17),f=n(4),g=function(e){return Math.random()<=e},y=function(e,t){return Math.random()*(t-e)+e},m=function(e,t,n,i){return new R(y(e,t),y(n,i))},_=function(e,t,n,i){return e.x>=t.x&&e.x<=t.x+n&&e.y>=t.y&&e.y<=t.y+i},v=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},p=function(e,t){return Number("".concat(Math.round("".concat(e,"e").concat(t)),"e-").concat(t))},b=function(e,t,n,i,o,r,a){var s=t*Math.cos(n),u=t*Math.sin(n),c=Math.min(Math.max(e.x+s,i),o),l=Math.min(Math.max(e.y+u,r),a);return new R(c,l)},k=function(){return y(1,10)},O=function(){return y(1,100)},x=function(){return y(0,.25)},j=function(){return y(0,.25)},T=function(){return y(25,250)},w=function(){return y(10,50)},E=function(){return y(0,1)},S=function(){return y(0,1)},M=function(e){return y(0,1-e)},F=function(e){return y(0,1-e)},L=function(){var e=Math.random(),t=Math.random(),n=1/(e+t+Math.random());return{left:e*n,right:t*n}},C=function(){return y(0,c)},P=function(){return y(0,l)},I=function(){return y(0,2*Math.PI)},U=function(){function e(t,n,i,o,r){Object(h.a)(this,e),this._second=t||0,this._minute=n||0,this._hour=i||0,this._day=o||0,this._year=r||0}return Object(d.a)(e,[{key:"incrementBySeconds",value:function(t){var n=(this._second+t)%60,i=Math.floor((this._second+t)/60),o=(this._minute+i)%60;i=Math.floor((this._minute+i)/60);var r=(this._hour+i)%60;i=Math.floor((this._hour+i)/60);var a=(this._day+i)%60;i=Math.floor((this._day+i)/60);var s=(this._year+i)%60;return i=Math.floor((this._year+i)/60),new e(n,o,r,a,s)}},{key:"incBySec",value:function(e){return this.incrementBySeconds(e)}},{key:"second",get:function(){return this._second}},{key:"minute",get:function(){return this._minute}},{key:"hour",get:function(){return this._hour}},{key:"day",get:function(){return this._day}},{key:"year",get:function(){return this._year}},{key:"s",get:function(){return this.second}},{key:"m",get:function(){return this.minute}},{key:"h",get:function(){return this.hour}},{key:"d",get:function(){return this.day}},{key:"y",get:function(){return this.year}},{key:"totalSeconds",get:function(){return this._second+60*this._minute+60*this._hour*60+24*this._day*60*60+365*this._year*24*60*60}},{key:"stringOut",get:function(){return"second:\t".concat(this._second,"\nminute:\t").concat(this._minute,"\nhour:\t").concat(this._hour,"\nday:\t").concat(this._day,"\nyear:\t").concat(this._year)}}]),e}(),R=function(){function e(t,n){Object(h.a)(this,e),this._x=t||0,this._y=n||0}return Object(d.a)(e,[{key:"distanceTo",value:function(e){var t=Math.abs(e.x-this._x),n=Math.abs(e.y-this._y);return Math.sqrt(t*t+n*n)}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}}]),e}(),N=function(){function e(t,n){Object(h.a)(this,e),this._id=t||v(),this._position=n}return Object(d.a)(e,[{key:"id",get:function(){return this._id}},{key:"x",get:function(){return this._position.x}},{key:"y",get:function(){return this._position.y}},{key:"position",get:function(){return this._position}}]),e}(),A=function(){function e(t,n,i,o){Object(h.a)(this,e),this.winnerId=t,this.winnerEnergyLoss=n,this.loserId=i,this.loserEnergyLoss=o}return Object(d.a)(e,[{key:"winnerId",get:function(){return this.winnerId}},{key:"winnerEnergyLoss",get:function(){return this.winnerEnergyLoss}},{key:"loserId",get:function(){return this.loserId}},{key:"loserEnergyLoss",get:function(){return this.loserEnergyLoss}}]),e}(),D=function(){function e(t){if(Object(h.a)(this,e),this._id=Object(f.isUndefined)(t.id)?v():t.id,this._speed=Object(f.isUndefined)(t.speed)?k():t.speed,this._strength=Object(f.isUndefined)(t.strength)?O():t.strength,this._boredomFood=Object(f.isUndefined)(t.boredomFood)?x():t.boredomFood,this._boredomMate=Object(f.isUndefined)(t.boredomMate)?j():t.boredomMate,this._energyLostToChild=Object(f.isUndefined)(t.energyLostToChild)?T():t.energyLostToChild,this._energyLostToCombat=Object(f.isUndefined)(t.energyLostToCombat)?w():t.energyLostToCombat,this._likelihoodPursueFood=Object(f.isUndefined)(t.likelihoodPursueFood)?E():t.likelihoodPursueFood,this._matingAgreeableness=Object(f.isUndefined)(t.matingAgreeableness)?S():t.matingAgreeableness,Object(f.isUndefined)(t.likelihoodTurnRight)||Object(f.isUndefined)(t.likelihoodTurnLeft))if(Object(f.isUndefined)(t.likelihoodTurnRight)&&Object(f.isUndefined)(t.likelihoodTurnLeft)){var n=L();this._likelihoodTurnRight=n.right,this._likelihoodTurnLeft=n.left}else Object(f.isUndefined)(t.likelihoodTurnRight)?(this._likelihoodTurnRight=M(t.likelihoodTurnLeft),this._likelihoodTurnLeft=t.likelihoodTurnLeft):Object(f.isUndefined)(t.likelihoodTurnLeft)&&(this._likelihoodTurnRight=t.likelihoodTurnRight,this._likelihoodTurnLeft=F(t.likelihoodTurnRight));else this._likelihoodTurnRight=t.likelihoodTurnRight,this._likelihoodTurnLeft=t.likelihoodTurnLeft;this._angleTurn=Object(f.isUndefined)(t.angleTurn)?C():t.angleTurn,this._variationAngleTurn=Object(f.isUndefined)(t.variationAngleTurn)?P():t.variationAngleTurn,this._position=Object(f.isUndefined)(t.position)?new R(0,0):t.position,this._direction=Object(f.isUndefined)(t.direction)?I():t.directions,this._energy=Object(f.isUndefined)(t.energy)?u:t.energy,this._isSeekingMate=!1,this._idOfMate=null,this._isSeekingFood=!1,this._idOfFood=null,this._locationOfFood=null}return Object(d.a)(e,[{key:"changePosition",value:function(e){e.x===this._position.x&&e.y===this._position.y||(this._position=e,this._energy-=1)}},{key:"changeDirection",value:function(e){this._direction=e%(2*Math.PI)}},{key:"changeEnergy",value:function(e){this._energy=e}},{key:"consumeFoods",value:function(e){var t=this;(function(e,t){var n,i,o,r,a,s,u=[];for(var c in t){var l=t[c];n=e,i=20,o=20,r=l.position,a=20,s=20,(_(r,n,i,o)||_(new R(r.x,r.y+s),n,i,o)||_(new R(r.x+a,r.y),n,i,o)||_(new R(r.x+a,r.y+s),n,i,o)||_(n,r,a,s))&&u.push(l.id)}return u})(this._position,e).forEach(function(n){t.changeEnergy(t._energy+20),delete e[n]})}},{key:"nextPosition",value:function(e,t,n,i,o,r){if(this._isSeekingMate)return this._position;if(this._isSeekingMate)return this._position;if(this._idOfFood&&this._locationOfFood&&t[this._idOfFood]&&!g(this._boredomFood)||(this._isSeekingFood=!1,this._idOfFood=null,this._locationOfFood=null),this._isSeekingFood)return this.changeDirection((a=this._locationOfFood.y-this._position.y,0===(s=this._locationOfFood.x-this._position.x)?a>=0?0:Math.PI:0===a?s>0?Math.PI/2:3*Math.PI/2:a>0&&s>0?Math.atan(a/s):a>0&&s<0?Math.PI-Math.atan(-a/s):a<0&&s<0?Math.PI+Math.atan(a/s):2*Math.PI-Math.atan(a/-s))),b(this._position,this._speed,this._direction,n,i,o,r);var a,s,u=function(e){for(var t=Object.keys(e),n=t.reduce(function(n,i,o){if(o===t.length-1)return n;var r=t[o+1];if(0===o)return n.concat([[i,0],[r,e[i]]]);var a=n[n.length-1][1];return n.concat([[r,a+e[i]]])},[]),i=Math.random(),o=0;o<n.length;o++){if(o===n.length-1)return n[o][0];if(i>=n[o][1]&&i<n[o+1][1])return n[o][0]}}({left:this._likelihoodTurnLeft,right:this._likelihoodTurnRight,center:1-(this._likelihoodTurnLeft+this._likelihoodTurnRight)}),c=y(this._angleTurn-this._variationAngleTurn,this._angleTurn+this._variationAngleTurn);switch(u){case"left":this.changeDirection(this._direction+c);break;case"right":this.changeDirection(this._direction-c)}return b(this._position,this._speed,this._direction,n,i,o,r)}},{key:"scanSurroundingsAndUpdateState",value:function(e,t){if(!this._isSeekingFood&&!this._isSeekingMate){var n=function(e,t){var n,i,o,r={};for(var a in t){var s=t[a];n=e,i=s.position,o=100,n.distanceTo(i)<=o&&(r[s.id]=s)}return r}(this._position,t),i=(this._position,{});if((!Object(f.isEmpty)(n)||!Object(f.isEmpty)(i))&&!Object(f.isEmpty)(n)&&Object(f.isEmpty)(i))if(g(this._likelihoodPursueFood)){var o=Object.keys(n)[0];this._isSeekingFood=!0,this._idOfFood=o,this._locationOfFood=n[o].position}else this._isSeekingFood=!1,this._idOfFood=null,this._locationOfFood=null}}},{key:"performCombat",value:function(e){return this.strength>=e.strength?new A(this.id,Math.max(this.energy-this.energyLostToCombat,0),e.id,e.energy):new A(e.id,Math.max(e.energy-e.energyLostToCombat,0),this.id,this.energy)}},{key:"produceChild",value:function(t){return this.energy=this.energy-this.energyLostToChild,new e((this.speed+t.speed)/2,(this.strength+t.strength)/2,(this.boredomFood+t.boredomFood)/2,(this.boredomMate+t.boredomMate)/2,(this.energyLostToChild+t.energyLostToChild)/2,(this.energyLostToCombat+t.energyLostToCombat)/2,(this.likelihoodPursueFood+t.likelihoodPursueFood)/2,(this.matingAgreeableness+t.matingAgreeableness)/2,(this.likelihoodTurnRight+t.likelihoodTurnRight)/2,(this.likelihoodTurnLeft+t.likelihoodTurnLeft)/2,(this.angleTurn+t.angleTurn)/2,(this.variationAngleTurn+t.variationAngleTurn)/2)}},{key:"position",get:function(){return this._position}},{key:"direction",get:function(){return this._direction}},{key:"isDead",get:function(){return 0===this._energy}},{key:"genes",get:function(){return{id:{displayName:"Id",value:this._id},speed:{displayName:"Speed",value:p(this._speed,2)},strength:{displayName:"Strength",value:p(this._strength,2)},boredomFood:{displayName:"Boredom food",value:p(this._boredomFood,2)},boredomMate:{displayName:"Boredom mate",value:p(this._boredomMate,2)},energyLostToChild:{displayName:"Energy lost to child",value:p(this._energyLostToChild,2)},energyLostToCombat:{displayName:"Energy lost to combat",value:p(this._energyLostToCombat,2)},likelihoodPursueFood:{displayName:"Likelihood pursue food",value:p(this._likelihoodPursueFood,2)},matingAgreeableness:{displayName:"Mating agreeableness",value:p(this._matingAgreeableness,2)},likelihoodTurnRight:{displayName:"Likelihood turn right",value:p(this._likelihoodTurnRight,2)},likelihoodTurnLeft:{displayName:"Likelihood turn left",value:p(this._likelihoodTurnLeft,2)},angleTurn:{displayName:"Angle turn",value:p(this._angleTurn,2)},variationAngleTurn:{displayName:"Variation angle turn",value:p(this._variationAngleTurn,2)}}}},{key:"status",get:function(){return{position:{displayName:"Position",value:"(x: ".concat(p(this._position.x,2),", y: ").concat(p(this._position.y,2),")")},direction:{displayName:"Direction",value:"".concat(p(this._direction,2)," radians")},energy:{displayName:"Energy",value:p(this._energy,0)},isSeekingMate:{displayName:"Is seeking mate",value:this._isSeekingMate?"True":"False"},idOfMate:{displayName:"Id of mate",value:this._idOfMate},isSeekingFood:{displayName:"Is seeking food",value:this._isSeekingFood?"True":"False"},idOfFood:{displayName:"Id of food",value:this._idOfFood},locationOfFood:{displayName:"Location of food",value:this._locationOfFood?"(x: ".concat(p(this._locationOfFood.x,2),", y: ").concat(p(this._locationOfFood.y,2),")"):null}}}}]),e}();var B=function(e,t){e.fillStyle="red",e.fillRect(t.x,t.y,20,20)},V=function(e){var t=e.context,n=e.creature,i=e.showVisionCircle,o=e.showDirection,r=e.isSelected;if(t.fillStyle=r?"purple":"blue",t.fillRect(n.position.x,n.position.y,20,20),i&&(t.beginPath(),t.arc(n.position.x,n.position.y,100,0,2*Math.PI),t.lineWidth=.5,t.stroke()),o){var a=n.direction,s=n.position.x+50*Math.cos(a),u=n.position.y+50*Math.sin(a);t.beginPath(),t.moveTo(n.position.x,n.position.y),t.lineTo(s,u),t.lineWidth=1,t.stroke(),t.beginPath(),t.beginPath(),t.arc(s,u,3,0,2*Math.PI),t.fillStyle="black",t.fill()}},H=n(95),W=n(92),z=n(96),J=n(94),q=n(93),G=n(11),X=n(12),Y="\n  display: flex;\n  align-items: center;\n  justify-content: center;\n";"\n  font-size: 64px;\n  font-weight: 600;\n  color: ".concat("#191919",";\n"),"\n  font-size: 32px;\n  font-weight: 400;\n  color: ".concat("#191919",";\n");function $(){var e=Object(G.a)(["\n  ",";\n  width: 100px;\n"]);return $=function(){return e},e}function K(){var e=Object(G.a)(["\n  ",";\n  width: 100px;\n"]);return K=function(){return e},e}function Q(){var e=Object(G.a)(["\n  ",";\n  width: 300px;\n"]);return Q=function(){return e},e}function Z(){var e=Object(G.a)(["\n  display: flex;\n  :not(:last-child) {\n    margin-bottom: 5px;\n  }\n"]);return Z=function(){return e},e}function ee(){var e=Object(G.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  background-color: ",";\n"]);return ee=function(){return e},e}var te=X.a.div(ee(),"#f0f6ff"),ne=X.a.div(Z()),ie=X.a.div(Q(),Y),oe=X.a.div(K(),Y),re=X.a.div($(),Y),ae=function(e){var t=e.creaturesToSpawn,n=e.simulationSpeed,i=e.showVisionCircles,r=e.showDirections,a=e.handleSpeedUpdate,s=e.handleClickPause,u=e.handleUpdateCreaturesToSpawn,c=e.handleClickSpawnCreatures,l=e.handleClickShowVisionCircles,h=e.handleClickShowDirections;return o.a.createElement(te,null,o.a.createElement(ne,null,o.a.createElement(oe,null,o.a.createElement(W.a,{onClick:s},"Pause")),o.a.createElement(ie,null,o.a.createElement(H.a,{min:1,max:500,value:n,onChange:function(e,t){a(t)}}))),o.a.createElement(ne,null,o.a.createElement(oe,null,o.a.createElement(W.a,{onClick:c},"Spawn")),o.a.createElement(re,null,o.a.createElement(z.a,{value:t,onChange:function(e){u(e.target.value)}}))),o.a.createElement(ne,null,o.a.createElement(q.a,null,"Show Vision Radius"),o.a.createElement(J.a,{checked:i,onChange:l})),o.a.createElement(ne,null,o.a.createElement(q.a,null,"Show Directions"),o.a.createElement(J.a,{checked:r,onChange:h})))};function se(){var e=Object(G.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return se=function(){return e},e}function ue(){var e=Object(G.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  background-color: ",";\n"]);return ue=function(){return e},e}var ce=X.a.div(ue(),"#f0f6ff"),le=X.a.div(se()),he=function(e){var t=e.creature;return t?o.a.createElement(ce,null,o.a.createElement("h2",null,"Status"),function(){var e=t.status;return Object.keys(e).map(function(t){return o.a.createElement(le,{key:t},o.a.createElement(q.a,null,e[t].displayName),o.a.createElement(q.a,null,e[t].value))})}(),o.a.createElement("h2",null,"Genes"),function(){var e=t.genes;return Object.keys(e).map(function(t){return o.a.createElement(le,{key:t},o.a.createElement(q.a,null,e[t].displayName),o.a.createElement(q.a,null,e[t].value))})}()):o.a.createElement("div",null,"Select a creature by clicking on it")};function de(){var e=Object(G.a)(["\n  margin-top: 5px;\n  border: 1px solid ",";\n"]);return de=function(){return e},e}function fe(){var e=Object(G.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  :not(:last-child) {\n    margin-right: 20px;\n  }\n"]);return fe=function(){return e},e}function ge(){var e=Object(G.a)(["\n  margin: 25px;\n  display: flex;\n"]);return ge=function(){return e},e}var ye=X.a.div(ge()),me=X.a.div(fe()),_e=X.a.canvas(de(),"#191919"),ve=function(){var e=Object(i.useRef)(null),t=Object(i.useRef)({}),n=Object(i.useRef)({}),r=Object(i.useState)(10),a=Object(s.a)(r,2),u=a[0],c=a[1],l=Object(i.useState)(null),h=Object(s.a)(l,2),d=h[0],f=h[1],y=Object(i.useState)(null),p=Object(s.a)(y,2),b=p[0],k=p[1],O=Object(i.useState)(new U),x=Object(s.a)(O,2),j=x[0],T=x[1],w=Object(i.useState)(1e3),E=Object(s.a)(w,2),S=E[0],M=E[1],F=Object(i.useState)(!1),L=Object(s.a)(F,2),C=L[0],P=L[1],I=Object(i.useState)(!1),A=Object(s.a)(I,2),H=A[0],W=A[1],z=Object(i.useState)(!1),J=Object(s.a)(z,2),G=J[0],X=J[1],Y=Object(i.useState)(null),$=Object(s.a)(Y,2),K=$[0],Q=$[1];Object(i.useEffect)(function(){f(e.current.getContext("2d"))},[]),function(e,t){var n=Object(i.useRef)();Object(i.useEffect)(function(){n.current=e},[e]),Object(i.useEffect)(function(){if(null!==t){var e=setInterval(function(){n.current()},t);return function(){return clearInterval(e)}}},[t])}(function(){T(j.incBySec(1))},C?null:1e6/S),Object(i.useEffect)(function(){if(d&&g(.3)){var e=d.canvas.clientHeight-20,n=d.canvas.clientHeight-20,i=v();t.current[i]=new N(i,m(0,e,0,n))}},[j]);var Z=function(e){if(n&&n.current){var t=new R(e.offsetX,e.offsetY);for(var i in n.current){var o=n.current[i];if(_(t,o.position,20,20))return i===K?void Q(null):void Q(i)}Q(null)}};Object(i.useEffect)(function(){return e.current.addEventListener("click",Z),function(){return e.current.removeEventListener("click",Z)}},[]);var ee=function(){var e=d.canvas.clientHeight-20,i=d.canvas.clientHeight-20;!function(e,t,n,i,o,r){(e?Object.keys(e):[]).forEach(function(a){var s=e[a];s.scanSurroundingsAndUpdateState(e,t),s.consumeFoods(t),s.changePosition(s.nextPosition(e,t,n,i,o,r)),s.isDead&&delete e[a]})}(n.current,t.current,0,e,0,i)};return o.a.createElement(ye,null,o.a.createElement(me,null,o.a.createElement(q.a,null,j.stringOut),o.a.createElement(q.a,null,"Simulation Speed: ".concat(C?"Paused":"".concat(S/1e3," sim. sec / IRL sec"))),o.a.createElement(ae,{simulationSpeed:Math.floor(S/1e3),creaturesToSpawn:u,showVisionCircles:H,showDirection:G,handleSpeedUpdate:function(e){return M(1e3*e)},handleClickPause:function(){return P(!C)},handleUpdateCreaturesToSpawn:function(e){return c(e)},handleClickSpawnCreatures:function(){return function(){for(var e=0;e<u;e++){var t=d.canvas.clientHeight-20,i=d.canvas.clientHeight-20,o=v();n.current[o]=new D({id:o,position:m(0,t,0,i)})}}()},handleClickShowVisionCircles:function(){return W(!H)},handleClickShowDirections:function(){return X(!G)}}),o.a.createElement(_e,{ref:e,width:400,height:400}),function(){if(!d)return null;d.clearRect(0,0,e.current.width,e.current.height),null!==b&&j.totalSeconds===b.totalSeconds||(ee(),k(j)),Object.keys(t.current).forEach(function(e){B(d,t.current[e])}),Object.keys(n.current).forEach(function(e){V({context:d,creature:n.current[e],showVisionCircle:H,showDirection:G,isSelected:e===K})})}()),o.a.createElement(me,null,o.a.createElement(he,{creature:n&&n.current&&K?n.current[K]:null})))};function pe(){var e=Object(G.a)(["\n  width: 100%;\n"]);return pe=function(){return e},e}var be=X.a.div(pe()),ke=function(){return o.a.createElement(be,null,o.a.createElement(ve,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[53,1,2]]]);
//# sourceMappingURL=main.e1c413a3.chunk.js.map